<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éª¨æ ¼è¨ºæ–­ï¼ˆè³ªå•ã¨çµæœï¼‰</title>
    <style>
        /*--- ã‚¹ã‚¿ã‚¤ãƒ«ã¯å¤‰æ›´ãªã— ---*/
        body { 
            background-color: #f8eaf0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
            font-family: sans-serif; 
            padding: 20px; 
        }
        .container { 
            width: 90%; 
            max-width: 450px; 
            padding: 30px 20px; 
            border-radius: 20px; 
            background-color: #f6e6f2; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            text-align: center; 
            position: relative;
        }
        
        .header { margin-bottom: 20px; } 
        
        /* è³ªå•é€²è¡Œåº¦è¡¨ç¤º */
        .question-progress { 
            display: flex; 
            justify-content: space-around; 
            width: 80%; 
            margin: 0 auto 30px; 
        }
        .question-number { 
            width: 30px; 
            height: 30px; 
            border-radius: 50%; 
            border: 2px solid #d175b0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            color: #d175b0; 
            font-weight: bold; 
        }
        .question-number.active { 
            background-color: #d175b0; 
            color: white; 
        }
        
        /* è³ªå•ãƒ»çµæœã‚¿ã‚¤ãƒˆãƒ« */
        .question-text { 
            color: #555; 
            font-size: 1.5em; 
            font-weight: bold; 
        }
        .result-text { 
            font-size: 1.2em; 
            margin-bottom: 10px; 
            color: #555; 
        }
        .result-type { 
            font-size: 2.2em; 
            font-weight: bold; 
            color: #e6a8d8; 
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1); 
            margin-bottom: 20px; 
        }
        
        /* å…±é€šãƒœã‚¿ãƒ³ãƒ»é¸æŠè‚¢ã‚¹ã‚¿ã‚¤ãƒ« */
        .choice-buttons, .result-actions { 
            display: flex; 
            flex-direction: column; 
            gap: 20px; 
            margin-top: 40px; 
        }
        .choice-button, .next-button { 
            display: block; 
            width: 80%; 
            max-width: 250px; 
            margin: 0 auto; 
            padding: 15px; 
            background-color: #e6a8d8; 
            border: none; 
            color: white; 
            font-size: 1.1em; 
            font-weight: bold; 
            border-radius: 25px; 
            cursor: pointer; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; 
            text-decoration: none; 
            box-sizing: border-box; 
            margin-top: 0; 
        }
        .next-button {
            margin-top: 30px; 
        }
        .choice-button:hover, .next-button:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 6px 8px rgba(0,0,0,0.15); 
        }
        
        /* çµæœç”»é¢å›ºæœ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .image-placeholder { 
            width: 250px; 
            height: 250px; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            border-radius: 10px; 
            margin: 0 auto 20px; 
            overflow: hidden;
            background-color: transparent;
        } 
        .result-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        .description-text { 
            color: #555; 
            line-height: 1.6; 
            padding: 0 10px; 
            margin-bottom: 30px; 
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="question-area">
            <header class="header">
                <div class="question-progress" id="progress-bar">
                    <span class="question-number">1</span>
                    <span class="question-number">2</span>
                    <span class="question-number">3</span>
                </div>
                <h1 class="question-text" id="question-title">Q1<br>è³ªå•æ–‡</h1>
            </header>
            
            <div class="choice-buttons" id="choice-buttons-container">
            </div>
        </div>

        <div id="result-area" style="display: none;">
            <header class="header">
                <h2 class="result-text">ã‚ãªãŸã®éª¨æ ¼ã¯</h2>
                <h1 class="result-type" id="final-result-type"></h1>
            </header>
            
            <div class="image-placeholder">
                <img id="result-image" class="result-image" alt="éª¨æ ¼è¨ºæ–­çµæœã®ã‚¤ãƒ¡ãƒ¼ã‚¸ç”»åƒ">
            </div>
            
            <p class="description-text" id="final-result-desc"></p>
            
            <a href="25sindankanryou.html" class="next-button">æ¬¡ã¸</a>
        </div>
    </div>

    <script>
/*--- è³ªå•ãƒ‡ãƒ¼ã‚¿ï¼ˆå¤‰æ›´ãªã—ï¼‰ ---*/
        const questions = [
            {
                id: 1,
                text: 'Q1<br>è‚©å¹…ã¨ã‚¦ã‚¨ã‚¹ãƒˆã®å·®ã¯ï¼Ÿ',
                choices: [
                    { text: 'è‚©ãŒåºƒãã€<br>ä¸ŠåŠèº«ã«åšã¿ãŒã‚ã‚‹', value: 'A' },
                    { text: 'è‚©ã¨ã‚¦ã‚¨ã‚¹ãƒˆãŒ<br>åŒã˜å¹…ã§ã‚¹ãƒªãƒ ', value: 'B' }
                ]
            },
            {
                id: 2,
                text: 'Q2<br>æ‰‹ã®ã²ã‚‰ã‚„æŒ‡ã®å¤§ãã•ã¯ï¼Ÿ',
                choices: [
                    { text: 'æ‰‹ã®ã²ã‚‰ã«åšã¿ãŒã‚ã‚Šã€<br>é–¢ç¯€ã¯ç›®ç«‹ãŸãªã„', value: 'A' },
                    { text: 'æŒ‡ã®é–¢ç¯€ã‚„<br>éª¨ãŒç›®ç«‹ã¤', value: 'B' }
                ]
            },
            {
                id: 3,
                text: 'Q3<br>ãƒœãƒ‡ã‚£ãƒ©ã‚¤ãƒ³ã¯ï¼Ÿ',
                choices: [
                    { text: 'ç›´ç·šçš„ã§ãƒ¡ãƒªãƒãƒªãŒå°‘ãªã„', value: 'A' }, 
                    { text: 'ã‚¦ã‚¨ã‚¹ãƒˆã«ãã³ã‚ŒãŒã‚ã‚Šã€<br>ä¸¸ã¿ãŒã‚ã‚‹', value: 'B' }
                ]
            }
        ];

/*--- è¨ºæ–­ãƒ‡ãƒ¼ã‚¿ï¼ˆç”·æ€§ã®é …ç›®ã‚’ä¿®æ­£ï¼‰ ---*/
        const diagnosisData = {
            // å¥³æ€§ (F)
            'FAAA': 'ãƒŠãƒãƒ¥ãƒ©ãƒ«', 'FABA': 'ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ', 'FAAB': 'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ãƒŠãƒãƒ¥ãƒ©ãƒ«',
            'FBAB': 'ã‚¦ã‚§ãƒ¼ãƒ–', 'FBBB': 'ã‚¦ã‚§ãƒ¼ãƒ–', 'FBBA': 'ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ',
            'FABB': 'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ', 'FBAA': 'ãƒŠãƒãƒ¥ãƒ©ãƒ«',

            // ç”·æ€§ (M)
            // ğŸ’¡ ä¿®æ­£å‰: 'MAAB': 'ãƒŠãƒãƒ¥ãƒ©ãƒ«', 'MABB': 'ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ' 
            // ğŸ’¡ ä¿®æ­£å¾Œ: æ­£ã—ã„è¨ºæ–­åã‚’è¨­å®š
            'MAAA': 'ãƒŠãƒãƒ¥ãƒ©ãƒ«', 
            'MABA': 'ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ', 
            'MAAB': 'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ãƒŠãƒãƒ¥ãƒ©ãƒ«', // ä¿®æ­£ç‚¹
            'MBAB': 'ã‚¦ã‚§ãƒ¼ãƒ–', 
            'MBBB': 'ã‚¦ã‚§ãƒ¼ãƒ–', 
            'MBBA': 'ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ',
            'MABB': 'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ', // ä¿®æ­£ç‚¹
            'MBAA': 'ãƒŠãƒãƒ¥ãƒ©ãƒ«',

            // ãã®ä»– (O)
            'OAAA': 'ãƒŠãƒãƒ¥ãƒ©ãƒ«', 'OABA': 'ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ', 'OAAB': 'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ãƒŠãƒãƒ¥ãƒ©ãƒ«',
            'OBAB': 'ã‚¦ã‚§ãƒ¼ãƒ–', 'OBBB': 'ã‚¦ã‚§ãƒ¼ãƒ–', 'OBBA': 'ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ',
            'OABB': 'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ', 'OBAA': 'ãƒŠãƒãƒ¥ãƒ©ãƒ«'
        };

/*--- è¨ºæ–­çµæœã¨æ€§åˆ¥ã«å¿œã˜ãŸç”»åƒãƒ‘ã‚¹ã®ãƒãƒƒãƒ—ï¼ˆç”·æ€§ã®é …ç›®ã‚’ä¿®æ­£ï¼‰ ---*/
        const resultImageMap = {
            'F': {
                'ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ': 'images/Straight.f.png',
                'ã‚¦ã‚§ãƒ¼ãƒ–': 'images/Wave.f.png',
                'ãƒŠãƒãƒ¥ãƒ©ãƒ«': 'images/Natural.f.png',
                'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ãƒŠãƒãƒ¥ãƒ©ãƒ«': 'images/WIN.f.png',
                'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ': 'images/WIS.f.png',
            },
            'M': {
                'ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ': 'images/Straight.m.png',
                'ã‚¦ã‚§ãƒ¼ãƒ–': 'images/Wave.m.png',
                'ãƒŠãƒãƒ¥ãƒ©ãƒ«': 'images/Natural.m.png',
                // ğŸ’¡ ä¿®æ­£ç‚¹: ç”·æ€§ç”¨ã®ç”»åƒãƒ‘ã‚¹ã«ã‚‚ä¸­é–“ã‚¿ã‚¤ãƒ—ã‚’è¿½åŠ 
                'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ãƒŠãƒãƒ¥ãƒ©ãƒ«': 'images/WIN.m.png', 
                'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ': 'images/WIS.m.png',
            },
            'O': {
                'ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ': 'female_straight.png',
                'ã‚¦ã‚§ãƒ¼ãƒ–': 'female_wave.png',
                'ãƒŠãƒãƒ¥ãƒ©ãƒ«': 'female_natural.png',
                'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ãƒŠãƒãƒ¥ãƒ©ãƒ«': 'female_wavenatural.png',
                'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ': 'female_wavestraight.png',
            }
        };


/*--- çµæœã«å¿œã˜ãŸèª¬æ˜æ–‡ï¼ˆå¤‰æ›´ãªã—ï¼‰ ---*/
        const resultDescriptions = {
            'ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ': 'ãƒãƒªã®ã‚ã‚‹è‚Œã¨ãƒ¡ãƒªãƒãƒªã®ã‚ã‚‹ãƒœãƒ‡ã‚£ãŒç‰¹å¾´ã€‚ã‚¸ãƒ£ã‚¹ãƒˆã‚µã‚¤ã‚ºã§ã‚·ãƒ³ãƒ—ãƒ«ãªæœãŒä¼¼åˆã„ã¾ã™ã€‚',
            'ã‚¦ã‚§ãƒ¼ãƒ–': 'è¯å¥¢ã§æŸ”ã‚‰ã‹ãªãƒœãƒ‡ã‚£ãƒ©ã‚¤ãƒ³ãŒç‰¹å¾´ã€‚æ›²ç·šçš„ã§ãƒ•ã‚§ãƒŸãƒ‹ãƒ³ãªæœãŒä¼¼åˆã„ã¾ã™ã€‚',
            'ãƒŠãƒãƒ¥ãƒ©ãƒ«': 'éª¨ã‚„é–¢ç¯€ãŒã—ã£ã‹ã‚Šã¨ã—ã¦ãŠã‚Šã€ãƒ•ãƒ¬ãƒ¼ãƒ æ„ŸãŒç‰¹å¾´ã€‚ã‚ªãƒ¼ãƒãƒ¼ã‚µã‚¤ã‚ºã‚„ãƒ­ãƒ³ã‚°ä¸ˆã€ç´ ææ„Ÿã®ã‚ã‚‹ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãŒå¾—æ„ã§ã™ã€‚',
            'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ãƒŠãƒãƒ¥ãƒ©ãƒ«': 'ãƒŠãƒãƒ¥ãƒ©ãƒ«ã®ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã•ã«ã€ã‚¦ã‚§ãƒ¼ãƒ–ã®æŸ”ã‚‰ã‹ã•ã‚’åŠ ãˆãŸã‚¹ã‚¿ã‚¤ãƒ«ãŒå¾—æ„ã§ã™ã€‚',
            'ã‚¦ã‚§ãƒ¼ãƒ–ã«è¿‘ã„ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ': 'ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆã®ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ã•ã«ã€ã‚¦ã‚§ãƒ¼ãƒ–ã®è¯ã‚„ã‹ã•ã‚’åŠ ãˆãŸã€ãã‚Œã„ã‚ãªã‚¹ã‚¿ã‚¤ãƒ«ãŒå¾—æ„ã§ã™ã€‚'
        };

/*--- çŠ¶æ…‹å¤‰æ•°ï¼ˆå¤‰æ›´ãªã—ï¼‰ ---*/
        let currentQuestionIndex = 0;
        let userAnswers = '';

/*--- DOMè¦ç´ ï¼ˆå¤‰æ›´ãªã—ï¼‰ ---*/
        const questionArea = document.getElementById('question-area');
        const questionTitleElement = document.getElementById('question-title');
        const choiceButtonsContainer = document.getElementById('choice-buttons-container');
        const questionNumbers = document.querySelectorAll('.question-number');
        const resultArea = document.getElementById('result-area');
        const finalResultType = document.getElementById('final-result-type');
        const finalResultDesc = document.getElementById('final-result-desc');
        const resultImageElement = document.getElementById('result-image');
        
/*--- é–¢æ•°ï¼ˆå¤‰æ›´ãªã—ï¼‰ ---*/

/*è³ªå•ç”»é¢ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°*/
        function updateQuestionScreen(index) {
            const question = questions[index];
            
            questionNumbers.forEach((el, idx) => {
                el.classList.remove('active');
                if (idx <= index) {
                    el.classList.add('active');
                }
            });

            questionTitleElement.innerHTML = question.text;

            choiceButtonsContainer.innerHTML = ''; 
            question.choices.forEach(choice => {
                const button = document.createElement('button');
                button.className = 'choice-button';
                button.innerHTML = choice.text;
                
                button.addEventListener('click', () => handleAnswer(choice.value));
                
                choiceButtonsContainer.appendChild(button);
            });
        }

/*å›ç­”ã‚’å‡¦ç†ã—ã€æ¬¡ã®è³ªå•ã¾ãŸã¯çµæœã¸é€²ã‚€é–¢æ•°*/
        function handleAnswer(answer) {
            userAnswers += answer;
            currentQuestionIndex++;

            if (currentQuestionIndex < questions.length) {
                updateQuestionScreen(currentQuestionIndex);
            } else {
                displayResult();
            }
        }

/*è¨ºæ–­çµæœã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°*/
        function displayResult() {
/* 1. localStorageã‹ã‚‰æ€§åˆ¥æƒ…å ±ã‚’å–å¾—*/
            const gender = localStorage.getItem('gender');
            let genderPrefix = '';

/* 2. æ€§åˆ¥ã«ã‚ˆã£ã¦æ¥é ­è¾ã‚’æ±ºå®š*/
            if (gender === 'male') {
                genderPrefix = 'M';
            } else if (gender === 'female') {
                genderPrefix = 'F';
            } else {
                genderPrefix = 'O'; 
            }
            
/* 3. è¨ºæ–­çµæœã‚’å–å¾—*/
            const resultKey = genderPrefix + userAnswers;
            // è¨ºæ–­ãƒ‡ãƒ¼ã‚¿ã«ã‚­ãƒ¼ãŒãªã„å ´åˆã¯ 'ä¸æ˜' ã¨ãªã‚‹ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
            const resultType = diagnosisData[resultKey] || 'ä¸æ˜'; 
            const resultDesc = resultDescriptions[resultType] || 'è¨ºæ–­çµæœã«å¯¾å¿œã™ã‚‹è©³ç´°æƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“ã€‚';

/* 4. ç”»åƒãƒ‘ã‚¹ã‚’å–å¾—*/
            let imagePath = '';
            // ç”»åƒãƒãƒƒãƒ—ã«æ€§åˆ¥ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¨çµæœã‚¿ã‚¤ãƒ—ä¸¡æ–¹ãŒã‚ã‚‹ã‹ç¢ºèª
            if (resultImageMap[genderPrefix] && resultImageMap[genderPrefix][resultType]) {
                imagePath = resultImageMap[genderPrefix][resultType];
            } else {
                // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒ
                imagePath = 'images/default_bodytype.png'; 
            }
            
            
/*--- éª¨æ ¼è¨ºæ–­ã®çµæœã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ ---*/
            localStorage.setItem('kotsukakuType', resultType);

/* è³ªå•ã‚¨ãƒªã‚¢ã‚’éè¡¨ç¤ºã«ã—ã€çµæœã‚¨ãƒªã‚¢ã‚’è¡¨ç¤º*/
            questionArea.style.display = 'none';
            
            finalResultType.textContent = resultType;
            finalResultDesc.textContent = resultDesc;
            
/* 5. ç”»åƒã‚’è¨­å®š*/
            resultImageElement.src = imagePath;
            resultImageElement.alt = `${resultType}ã®éª¨æ ¼ã‚¤ãƒ¡ãƒ¼ã‚¸`;
            
            resultArea.style.display = 'block';
        }

/*åˆæœŸåŒ–ï¼šè¨ºæ–­é–‹å§‹*/
        updateQuestionScreen(currentQuestionIndex);
    </script>
</body>
</html>
